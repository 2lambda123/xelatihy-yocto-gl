
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Fabio Pellacini">
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.5">
    
    
      
        <title>Scene serialization - Yocto/GL</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.77f3fd56.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#yoctosceneio-scene-serialization" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Yocto/GL" class="md-header__button md-logo" aria-label="Yocto/GL">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Yocto/GL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Scene serialization
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/xelatihy/yocto-gl/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    xelatihy/yocto-gl
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Yocto/GL" class="md-nav__button md-logo" aria-label="Yocto/GL">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Yocto/GL
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/xelatihy/yocto-gl/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    xelatihy/yocto-gl
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../gallery/" class="md-nav__link">
        Gallery
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_math/" class="md-nav__link">
        Math types
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_color/" class="md-nav__link">
        Color operations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_geometry/" class="md-nav__link">
        Geometry operations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_sampling/" class="md-nav__link">
        Sampling routines
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_noise/" class="md-nav__link">
        Noise functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_shading/" class="md-nav__link">
        Shading routines
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_image/" class="md-nav__link">
        Image utilities
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_shape/" class="md-nav__link">
        Shape utilities
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_mesh/" class="md-nav__link">
        Mesh processing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_scene/" class="md-nav__link">
        Scene representation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_bvh/" class="md-nav__link">
        Ray-scene intersection
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_modelio/" class="md-nav__link">
        Model serialization
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Scene serialization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Scene serialization
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#image-serialization" class="md-nav__link">
    Image serialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scene-serialization" class="md-nav__link">
    Scene serialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shape-serialization" class="md-nav__link">
    Shape serialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texture-serialization" class="md-nav__link">
    Texture serialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text-and-binary-serialization" class="md-nav__link">
    Text and binary serialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#path-utilities" class="md-nav__link">
    Path utilities
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_trace/" class="md-nav__link">
        Path tracing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_cli/" class="md-nav__link">
        Command-line utilities
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../yocto_parallel/" class="md-nav__link">
        Concurrency utilities
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#image-serialization" class="md-nav__link">
    Image serialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scene-serialization" class="md-nav__link">
    Scene serialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shape-serialization" class="md-nav__link">
    Shape serialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texture-serialization" class="md-nav__link">
    Texture serialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text-and-binary-serialization" class="md-nav__link">
    Text and binary serialization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#path-utilities" class="md-nav__link">
    Path utilities
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="yoctosceneio-scene-serialization">Yocto/SceneIO: Scene serialization</h1>
<p>Yocto/SceneIO is a collection of functions to load and save images and
scene elements, together with path manipulation utilities.
Yocto/SceneIO is implemented in <code>yocto_sceneio.h</code> and <code>yocto_sceneio.cpp</code>,
and depends on <code>json.hpp</code> for Json serialization, and <code>stb_image.h</code>,
<code>stb_image_write.h</code> and <code>tinyexr.h</code> for the image serialization.</p>
<h2 id="image-serialization">Image serialization</h2>
<p>Images are loaded with <code>load_image(filename, img, error)</code> and saved with
<code>save_image(filename, img, error)</code>. Both loading and saving take a filename,
an image buffer and return whether or not the image was loaded successfully.
In the case of an error, the IO functions set the <code>error</code> string with a
message suitable for displaying to a user.
Yocto/SceneIO supports loading and saving to JPG, PNG, TGA, BMP, HDR, EXR.</p>
<p>When loading images, the color space is detected by the filename and stored
in the returned image. Since color space information is not
present in many images and since it is customary in 3D graphics to misuse
color encoding, e.g. normal maps stored in sRGB, during loading 8bit file
formats are assume to be encoded sRGB, while float formats are assumed to
be encoded in linear RGB.
Use <code>is_hdr_filename(filename)</code> to determine whether a supported format
contains linear float data.
When saving images, pixel values are converted to the color space supported
by the chosen file format.</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span> <span class="n">error</span> <span class="o">=</span> <span class="n">string</span><span class="p">{};</span>
<span class="k">auto</span> <span class="n">image</span> <span class="o">=</span> <span class="n">color_image</span><span class="p">{};</span>             <span class="c1">// define an image</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">load_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span> <span class="c1">// load image</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>                   <span class="c1">// check and print error</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">save_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span> <span class="c1">// save image</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>                   <span class="c1">// check and print error</span>
</code></pre></div>
<h2 id="scene-serialization">Scene serialization</h2>
<p>Scenes are loaded with <code>load_scene(filename, scene, error, progress)</code> and
saved with <code>save_scene(filename, scene, error, progress)</code>.
Both loading and saving take a filename, a scene reference and return
whether or not the scene was loaded successfully.
In the case of an error, the IO functions set the <code>error</code> string with a
message suitable for displaying to a user.
Yocto/SceneIO supports loading and saving to a custom Json format,
Obj, glTF, Pbrt, and all shape file formats.</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span> <span class="n">scene</span> <span class="o">=</span> <span class="n">scene_model</span><span class="p">{};</span>              <span class="c1">// scene</span>
<span class="k">auto</span> <span class="n">error</span> <span class="o">=</span> <span class="n">string</span><span class="p">{};</span>                   <span class="c1">// error buffer</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">load_scene</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">scene</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span>  <span class="c1">// load scene</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">save_scene</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">scene</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span>  <span class="c1">// save scene</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
</code></pre></div>
<h2 id="shape-serialization">Shape serialization</h2>
<p>Shapes are loaded with <code>load_shape(filename, shape, error)</code> and
saved with <code>save_shape(filename, shape, error)</code>.
Face-varying shapes with <code>load_fvshape(filename, shape, error)</code>
and saved with <code>save_fvshape(filename, shape, error)</code>.
Both loading and saving take a filename, a scene reference and return
whether or not the scene was loaded successfully.
In the case of an error, the IO functions set the <code>error</code> string with a
message suitable for displaying to a user.
Yocto/SceneIO supports loading and saving to Ply, Obj, Stl.</p>
<p>For indexed meshes, the type of elements is determined during loading,
while face-varying coerce all face to quads. By default, texture coordinates
are flipped vertically to match the convention of OpenGL texturing;
this can be disabled by setting the <code>flipv</code> flag.</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">scene_shape</span><span class="p">{};</span>                  <span class="c1">// shape</span>
<span class="k">auto</span> <span class="n">error</span> <span class="o">=</span> <span class="n">string</span><span class="p">{};</span>                       <span class="c1">// error buffer</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">load_shape</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span>      <span class="c1">// load shape</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">save_shape</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span>      <span class="c1">// save shape</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>

<span class="k">auto</span> <span class="n">fvshape</span> <span class="o">=</span> <span class="n">scene_fvshape</span><span class="p">{};</span>              <span class="c1">// face-varying shape</span>
<span class="k">auto</span> <span class="n">error</span> <span class="o">=</span> <span class="n">string</span><span class="p">{};</span>                       <span class="c1">// error buffer</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">load_fvshape</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">fvshape</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span>  <span class="c1">// load shape</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">save_fvshape</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">fvshape</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span>  <span class="c1">// save shape</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
</code></pre></div>
<h2 id="texture-serialization">Texture serialization</h2>
<p>Textures are loaded with <code>load_texture(filename, texture, error)</code> and saved with
<code>save_texture(filename, texture, error)</code>. Both loading and saving take a filename,
a texture and return whether or not the image was loaded successfully.
In the case of an error, the IO functions set the <code>error</code> string with a
message suitable for displaying to a user.
Yocto/SceneIO supports loading and saving to JPG, PNG, TGA, BMP, HDR, EXR.</p>
<p>When loading textures, the color space and bit depth is detected by the filename.
Texture are loaded as float for float file formats, and as bytes for 8bit file
formats. Since color space information is not present in many images,
we assume that byte textures are encoded in sRGB, and float texture in linear RGB.
Use <code>is_hdr_filename(filename)</code> to determine whether a supported format
contains linear float data.
When saving images, pixel values are converted to the color space supported
by the chosen file format.</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span> <span class="n">error</span> <span class="o">=</span> <span class="n">string</span><span class="p">{};</span>
<span class="k">auto</span> <span class="n">texture</span> <span class="o">=</span> <span class="n">scene_texture</span><span class="p">{};</span>             <span class="c1">// define a texture</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">load_texture</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">texture</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span> <span class="c1">// load texture</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>                       <span class="c1">// check and print error</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">save_texture</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">texture</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span> <span class="c1">// save texture</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>                       <span class="c1">// check and print error</span>
</code></pre></div>
<h2 id="text-and-binary-serialization">Text and binary serialization</h2>
<p>Text files are loaded with <code>load_text(filename, text, error)</code> and saved with
<code>save_text(filename, text, error)</code>.
Binary files are loaded with <code>load_binary(filename, binary, error)</code> and saved
with <code>save_binary(filename, binary, error)</code>.
Both loading and saving take a filename, a text or binary buffer, and return
whether or not the file was loaded successfully.
In the case of an error, the IO functions set the <code>error</code> string with a
message suitable for displaying to a user.</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span> <span class="n">error</span> <span class="o">=</span> <span class="n">string</span><span class="p">{};</span>                  <span class="c1">// error buffer</span>
<span class="k">auto</span> <span class="n">text</span>  <span class="o">=</span> <span class="n">string</span><span class="p">{};</span>                  <span class="c1">// text buffer</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">load_text</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span>   <span class="c1">// load a text file</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>                   <span class="c1">// check and print error</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">save_text</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span>   <span class="c1">// save a text file</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>                   <span class="c1">// check and print error</span>
<span class="k">auto</span> <span class="n">data</span>  <span class="o">=</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">byte</span><span class="o">&gt;</span><span class="p">{};</span>            <span class="c1">// data buffer</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">load_binary</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span> <span class="c1">// load a binary file</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>                   <span class="c1">// check and print error</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">save_binary</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span> <span class="c1">// save a binary file</span>
  <span class="n">print_error</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>                   <span class="c1">// check and print error</span>
</code></pre></div>
<h2 id="path-utilities">Path utilities</h2>
<p>Yocto/SceneIO contains several helper function to manipulate paths. These are
just convenience wrapper of <code>std::filesystem</code>.
Use <code>path_dirname(filename)</code>, <code>path_extension(filename)</code>,<br />
<code>path_filename(filename)</code>, <code>path_basename(fillename)</code>
to extract the directory, extension, filename and basename from a path.
Use <code>path_join(patha,pathb)</code> to joins paths and
<code>replace_extension(filename,ext)</code> to replace a path extension.
Use <code>path_exists(filename)</code> to check if a path exists and
<code>path_isdir(filename)</code> and <code>path_isfile(filename)</code> to check whether
it is a directory ot file respectively.
Use <code>list_directory(dirname)</code> to list directory contents, and
<code>path_current()</code> to get the current directory.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../yocto_modelio/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Model serialization
            </div>
          </div>
        </a>
      
      
        <a href="../yocto_trace/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Path tracing
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2020 Fabio Pellacini
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.5cf3e710.min.js"></script>
      
    
  </body>
</html>